const input = document.querySelector("#input"),
  numbersButton = document.querySelectorAll(".number"),
  operatorsButton = document.querySelectorAll(".operator"),
  decimalButton = document.querySelector(".decimal"),
  equalButton = document.querySelector(".equal"),
  deleteButton = document.querySelector(".delete"),
  clearButton = document.querySelector(".clear");
let decimal = ".",
  resetDisplay = !0;
const operators = ["+", "-", "*", "/"];
function operate(e, t, u) {
  switch (e) {
    case "+":
      return t + u;
    case "-":
      return t - u;
    case "*":
      return t * u;
    case "/":
      return 0 === u ? "Error: division by zero!" : t / u;
    default:
      return "Error!";
  }
}
numbersButton.forEach((e) => {
  e.addEventListener("click", (e) => {
    input.value.length >= 25 ||
      ("0" === input.value && (input.value = ""),
      resetDisplay && ((input.value = ""), (resetDisplay = !1)),
      (input.value += e.target.textContent));
  });
}),
  clearButton.addEventListener("click", (e) => {
    (input.value = "0"), (resetDisplay = !0), console.log(e.target.textContent);
  }),
  deleteButton.addEventListener("click", (e) => {
    (input.value = input.value.slice(0, -1)),
      "" === input.value && ((input.value = "0"), (resetDisplay = !0)),
      console.log(e.target.className);
  }),
  decimalButton.addEventListener("click", (e) => {
    input.value
      .split(/[\+\-\*\/]/)
      .at(-1)
      .includes(decimal) ||
      (/[\+\-\*\/]$/.test(input.value)
        ? (input.value += "0.")
        : ((input.value += decimal), console.log(e.target.className)));
  }),
  equalButton.addEventListener("click", (e) => {
    const t = input.value,
      u = operators.find((e) => t.includes(e));
    if (!u) return;
    const [n, l] = t.split(u);
    if ("" === l) return;
    const r = operate(u, Number(n), Number(l));
    (input.value = r), (resetDisplay = !0), console.log(e.target.textContent);
  }),
  operatorsButton.forEach((e) => {
    e.addEventListener("click", (e) => {
      const t = e.target.textContent,
        u = input.value.slice(-1);
      (input.value || "-" === t) &&
        (operators.includes(u)
          ? (input.value = input.value.slice(0, -1) + t)
          : operators.some((e) => input.value.includes(e)) ||
            ((input.value += t), (resetDisplay = !1)));
    });
  });
